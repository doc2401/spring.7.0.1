<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>TestPropertySource (Spring Framework 7.0.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.springframework.test.context, annotation type: TestPropertySource">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TestPropertySource.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language">Spring Framework</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.springframework.test.context</a></li>
<li><a href="TestPropertySource.html" class="current-selection">TestPropertySource</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#annotation-interface-optional-element-summary" tabindex="0">Optional Element Summary</a></li>
<li><a href="#annotation-interface-element-detail" tabindex="0">Element Details</a>
<ol class="toc-list">
<li><a href="#value()" tabindex="0">value</a></li>
<li><a href="#locations()" tabindex="0">locations</a></li>
<li><a href="#inheritLocations()" tabindex="0">inheritLocations</a></li>
<li><a href="#properties()" tabindex="0">properties</a></li>
<li><a href="#inheritProperties()" tabindex="0">inheritProperties</a></li>
<li><a href="#encoding()" tabindex="0">encoding</a></li>
<li><a href="#factory()" tabindex="0">factory</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Annotation Interface TestPropertySource" class="title">Annotation Interface TestPropertySource</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Documented.html" title="class or interface in java.lang.annotation" class="external-link">@Documented</a>
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Inherited.html" title="class or interface in java.lang.annotation" class="external-link">@Inherited</a>
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Repeatable.html" title="class or interface in java.lang.annotation" class="external-link">@Repeatable</a>(<a href="TestPropertySources.html" title="annotation interface in org.springframework.test.context">TestPropertySources</a>.class)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">TestPropertySource</span></div>
<div class="block"><code>@TestPropertySource</code> is an annotation that can be applied to a test
class to configure the <a href="#locations()"><code>locations()</code></a> of properties files and inlined
<a href="#properties()"><code>properties()</code></a> to be added to the <code>Environment</code>'s set of
<code>PropertySources</code> for an
<a href="../../context/ApplicationContext.html" title="interface in org.springframework.context"><code>ApplicationContext</code></a>
for integration tests.

<h3 id="precedence-heading">Precedence</h3>
<p>Test property sources have higher precedence than those loaded from the
operating system's environment or Java system properties as well as property
sources added by the application declaratively via
<a href="../../context/annotation/PropertySource.html" title="annotation interface in org.springframework.context.annotation"><code>@PropertySource</code></a>
or programmatically (for example, via an
<a href="../../context/ApplicationContextInitializer.html" title="interface in org.springframework.context"><code>ApplicationContextInitializer</code></a>
or some other means). Thus, test property sources can be used to selectively
override properties defined in system and application property sources.
Furthermore, inlined <a href="#properties()"><code>properties()</code></a> have higher precedence than
properties loaded from resource <a href="#locations()"><code>locations()</code></a>. Note, however, that
properties registered via <a href="DynamicPropertySource.html" title="annotation interface in org.springframework.test.context"><code>@DynamicPropertySource</code></a>
have higher precedence than those loaded via <code>@TestPropertySource</code>.

<h3 id="default-properties-file-detection-heading">Default Properties File Detection</h3>
<p>If <code>@TestPropertySource</code> is declared as an <em>empty</em> annotation
(i.e., without explicit values for <a href="#locations()"><code>locations()</code></a> or <a href="#properties()"><code>properties()</code></a>),
an attempt will be made to detect a <em>default</em> properties file relative
to the class that declared the annotation. For example, if the annotated test
class is <code>com.example.MyTest</code>, the corresponding default properties file
is <code>"classpath:com/example/MyTest.properties"</code>. If the default cannot be
detected, an <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link"><code>IllegalStateException</code></a> will be thrown.

<h3 id="enabling-testpropertysource-heading">Enabling &#064;TestPropertySource</h3>
<p><code>@TestPropertySource</code> is enabled if the configured
<a href="ContextConfiguration.html#loader()">context loader</a> honors it. Every
<code>SmartContextLoader</code> that is a subclass of either
<a href="support/AbstractGenericContextLoader.html" title="class in org.springframework.test.context.support"><code>AbstractGenericContextLoader</code></a> or
<a href="web/AbstractGenericWebContextLoader.html" title="class in org.springframework.test.context.web"><code>AbstractGenericWebContextLoader</code></a>
provides automatic support for <code>@TestPropertySource</code>, and this includes
every <code>SmartContextLoader</code> provided by the Spring TestContext Framework.

<h3 id="miscellaneous-heading">Miscellaneous</h3>
<ul>
<li>Typically, <code>@TestPropertySource</code> will be used in conjunction with
<a href="ContextConfiguration.html" title="annotation interface in org.springframework.test.context"><code>@ContextConfiguration</code></a>.</li>
<li><code>@TestPropertySource</code> can be used as a <em><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Repeatable.html" title="class or interface in java.lang.annotation" class="external-link">repeatable</a></em> annotation.</li>
<li>This annotation may be used as a <em>meta-annotation</em> to create
custom <em>composed annotations</em>, but caution should be taken if
this annotation and <code>@ContextConfiguration</code> are combined on a composed
annotation since the <code>locations</code> and <code>inheritLocations</code> attributes
of both annotations can lead to ambiguity during the attribute resolution
process. Note, however, that ambiguity can be avoided via explicit annotation
attribute overrides using <a href="../../core/annotation/AliasFor.html" title="annotation interface in org.springframework.core.annotation"><code>@AliasFor</code></a>.</li>
<li>This annotation will be inherited from an enclosing test class by default.
See <a href="NestedTestConfiguration.html" title="annotation interface in org.springframework.test.context"><code>@NestedTestConfiguration</code></a> for details.</li>
</ul></div>
<dl class="notes">
<dt>Since:</dt>
<dd>4.1</dd>
<dt>Author:</dt>
<dd>Sam Brannen</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="ContextConfiguration.html" title="annotation interface in org.springframework.test.context"><code>ContextConfiguration</code></a></li>
<li><a href="DynamicPropertySource.html" title="annotation interface in org.springframework.test.context"><code>DynamicPropertySource</code></a></li>
<li><a href="../../core/env/Environment.html" title="interface in org.springframework.core.env"><code>Environment</code></a></li>
<li><a href="../../core/env/PropertySource.html" title="class in org.springframework.core.env"><code>PropertySource</code></a></li>
<li><a href="../../context/annotation/PropertySource.html" title="annotation interface in org.springframework.context.annotation"><code>PropertySource</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#encoding()" class="member-name-link">encoding</a></code></div>
<div class="col-last even-row-color">
<div class="block">Specify the character encoding for the given <a href="#locations()">resources</a>
&mdash; for example, "UTF-8".</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a><wbr>&lt;? extends <a href="../../core/io/support/PropertySourceFactory.html" title="interface in org.springframework.core.io.support">PropertySourceFactory</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#factory()" class="member-name-link">factory</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Specify a custom <a href="../../core/io/support/PropertySourceFactory.html" title="interface in org.springframework.core.io.support"><code>PropertySourceFactory</code></a>, if any.</div>
</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#inheritLocations()" class="member-name-link">inheritLocations</a></code></div>
<div class="col-last even-row-color">
<div class="block">Whether test property source <a href="#locations()"><code>locations()</code></a> from superclasses
and enclosing classes should be <em>inherited</em>.</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#inheritProperties()" class="member-name-link">inheritProperties</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Whether inlined test <a href="#properties()"><code>properties()</code></a> from superclasses and
enclosing classes should be <em>inherited</em>.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#locations()" class="member-name-link">locations</a></code></div>
<div class="col-last even-row-color">
<div class="block">The resource locations of properties files to be loaded into the
<code>Environment</code>'s set of <code>PropertySources</code>.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second odd-row-color"><code><a href="#properties()" class="member-name-link">properties</a></code></div>
<div class="col-last odd-row-color">
<div class="block"><em>Inlined properties</em> in the form of <em>key-value</em> pairs that
should be added to the Spring
<a href="../../core/env/Environment.html" title="interface in org.springframework.core.env"><code>Environment</code></a> before the
<code>ApplicationContext</code> is loaded for the test.</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#value()" class="member-name-link">value</a></code></div>
<div class="col-last even-row-color">
<div class="block">Alias for <a href="#locations()"><code>locations()</code></a>.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="value()">
<h3>value</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="annotations"><a href="../../core/annotation/AliasFor.html" title="annotation interface in org.springframework.core.annotation">@AliasFor</a>("locations")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">value</span></div>
<div class="block">Alias for <a href="#locations()"><code>locations()</code></a>.
<p>This attribute may <strong>not</strong> be used in conjunction with
<a href="#locations()"><code>locations()</code></a>, but it may be used <em>instead</em> of <a href="#locations()"><code>locations()</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#locations()"><code>locations()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>{}</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="locations()">
<h3>locations</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="annotations"><a href="../../core/annotation/AliasFor.html" title="annotation interface in org.springframework.core.annotation">@AliasFor</a>("value")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">locations</span></div>
<div class="block">The resource locations of properties files to be loaded into the
<code>Environment</code>'s set of <code>PropertySources</code>.
<p>Each location will be added to the enclosing <code>Environment</code> as its
own property source, in the order declared (or in the order in which resource
locations are resolved when location wildcards are used).
<h4 id="supported-file-formats-heading">Supported File Formats</h4>
<p>By default, both traditional and XML-based properties file formats are
supported &mdash; for example, <code>"classpath:/com/example/test.properties"</code>
or <code>"file:/path/to/file.xml"</code>. To support a different file format,
configure an appropriate <a href="#factory()"><code>PropertySourceFactory</code></a>.
<h4 id="path-resource-semantics-heading">Path Resource Semantics</h4>
<p>Each path will be interpreted as a Spring
<a href="../../core/io/Resource.html" title="interface in org.springframework.core.io"><code>Resource</code></a>. A plain path
&mdash; for example, <code>"test.properties"</code> &mdash; will be treated as a
classpath resource that is <em>relative</em> to the package in which the
test class is defined. A path starting with a slash will be treated as an
<em>absolute</em> classpath resource, for example:
<code>"/org/example/test.xml"</code>. A path which references a
URL (for example, a path prefixed with
<a href="../../util/ResourceUtils.html#CLASSPATH_URL_PREFIX"><code>classpath:</code></a>,
<a href="../../util/ResourceUtils.html#FILE_URL_PREFIX"><code>file:</code></a>,
<code>http:</code>, etc.) will be loaded using the specified resource protocol.
<p>Property placeholders in paths (i.e., <code>${...}</code>) will be
<a href="../../core/env/PropertyResolver.html#resolveRequiredPlaceholders(java.lang.String)">resolved</a> against the <code>Environment</code>.
<p>As of Spring Framework 6.1, resource location patterns are also
supported &mdash; for example, <code>"classpath*:/config/*.properties"</code>.
<p><strong>WARNING</strong>: a pattern such as <code>"classpath*:/config/*.properties"</code>
may be effectively equivalent to an explicit enumeration of resource locations such as
<code>{"classpath:/config/mail.properties", classpath:/config/order.properties"}</code>;
however, the two declarations will result in different keys for the context
cache since the pattern cannot be eagerly resolved to concrete locations.
Consequently, to benefit from the context cache you must ensure that you
consistently use either patterns or explicit enumerations of resource
locations within your test suite.
<h4 id="default-properties-file-detection-heading1">Default Properties File Detection</h4>
<p>See the class-level Javadoc for a discussion on detection of defaults.
<h4 id="precedence-heading1">Precedence</h4>
<p>Properties loaded from resource locations have lower precedence than
inlined <a href="#properties()"><code>properties()</code></a>.
<p>This attribute may <strong>not</strong> be used in conjunction with
<a href="#value()"><code>value()</code></a>, but it may be used <em>instead</em> of <a href="#value()"><code>value()</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#inheritLocations()"><code>inheritLocations()</code></a></li>
<li><a href="#value()"><code>value()</code></a></li>
<li><a href="#properties()"><code>properties()</code></a></li>
<li><a href="#encoding()"><code>encoding()</code></a></li>
<li><a href="#factory()"><code>factory()</code></a></li>
<li><a href="../../core/env/PropertySource.html" title="class in org.springframework.core.env"><code>PropertySource</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>{}</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="inheritLocations()">
<h3>inheritLocations</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">inheritLocations</span></div>
<div class="block">Whether test property source <a href="#locations()"><code>locations()</code></a> from superclasses
and enclosing classes should be <em>inherited</em>.
<p>The default value is <code>true</code>, which means that a test class will
<em>inherit</em> property source locations defined by a superclass or
enclosing class. Specifically, the property source locations for a test
class will be appended to the list of property source locations defined
by a superclass or enclosing class. Thus, subclasses and nested classes
have the option of <em>extending</em> the list of test property source
locations.
<p>If <code>inheritLocations</code> is set to <code>false</code>, the property
source locations for the test class will <em>shadow</em> and effectively
replace any property source locations defined by a superclass or
enclosing class.
<p>In the following example, the <code>ApplicationContext</code> for
<code>BaseTest</code> will be loaded using only the <code>"base.properties"</code>
file as a test property source. In contrast, the <code>ApplicationContext</code>
for <code>ExtendedTest</code> will be loaded using the <code>"base.properties"</code>
<strong>and</strong> <code>"extended.properties"</code> files as test property
source locations.
<pre class="code">
&#064;TestPropertySource("base.properties")
&#064;ContextConfiguration
public class BaseTest {
  // ...
}

&#064;TestPropertySource("extended.properties")
&#064;ContextConfiguration
public class ExtendedTest extends BaseTest {
  // ...
}</pre>
<p>If <code>@TestPropertySource</code> is used as a <em><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Repeatable.html" title="class or interface in java.lang.annotation" class="external-link">repeatable</a></em> annotation, the following special rules apply.
<ol>
<li>All <code>@TestPropertySource</code> annotations at a given level in the
test class hierarchy (i.e., directly present or meta-present on a test
class) are considered to be <em>local</em> annotations, in contrast to
<code>@TestPropertySource</code> annotations that are inherited from a
superclass.</li>
<li>All local <code>@TestPropertySource</code> annotations must declare the
same value for the <code>inheritLocations</code> flag.</li>
<li>The <code>inheritLocations</code> flag is not taken into account between
local <code>@TestPropertySource</code> annotations. Specifically, the property
source locations for one local annotation will be appended to the list of
property source locations defined by previous local annotations. This
allows a local annotation to extend the list of test property source
locations, potentially overriding individual properties.</li>
</ol></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#locations()"><code>locations()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>true</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="properties()">
<h3>properties</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">properties</span></div>
<div class="block"><em>Inlined properties</em> in the form of <em>key-value</em> pairs that
should be added to the Spring
<a href="../../core/env/Environment.html" title="interface in org.springframework.core.env"><code>Environment</code></a> before the
<code>ApplicationContext</code> is loaded for the test. All key-value pairs
will be added to the enclosing <code>Environment</code> as a single test
<code>PropertySource</code> with the highest precedence. As of Spring Framework
6.1, multiple key-value pairs may be specified via a single <em>text block</em>.
<h4 id="supported-syntax-heading">Supported Syntax</h4>
<p>The supported syntax for key-value pairs is the same as the
syntax defined for entries in a Java
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html#load(java.io.Reader)" title="class or interface in java.util" class="external-link">properties file</a>:
<ul>
<li><code>"key=value"</code></li>
<li><code>"key:value"</code></li>
<li><code>"key value"</code></li>
</ul>
<p><strong>WARNING</strong>: although properties can be defined using any
of the above syntax variants and any number of spaces between the key and
the value, it is recommended that you use one syntax variant and consistent
spacing within your test suite &mdash; for example, consider always using
<code>"key = value"</code> instead of <code>"key= value"</code>, <code>"key=value"</code>,
etc. Similarly, if you define inlined properties using <em>text blocks</em>
you should consistently use text blocks for inlined properties throughout
your test suite. The reason is that the exact strings you provide will be
used to determine the key for the context cache. Consequently, to benefit
from the context cache you must ensure that you define inlined properties
consistently.
<h4 id="examples-heading">Examples</h4>
<pre class="code">
&#47;&#47; Using an array of strings
&#064;TestPropertySource(properties = {
    "key1 = value1",
    "key2 = value2"
})
&#064;ContextConfiguration
class MyTests {
  // ...
}</pre>
<pre class="code">
&#47;&#47; Using a single text block
&#064;TestPropertySource(properties = """
    key1 = value1
    key2 = value2
    """
)
&#064;ContextConfiguration
class MyTests {
  // ...
}</pre>
<h4 id="precedence-heading2">Precedence</h4>
<p>Properties declared via this attribute have higher precedence than
properties loaded from resource <a href="#locations()"><code>locations()</code></a>.
<p>This attribute may be used in conjunction with <a href="#value()"><code>value()</code></a>
<em>or</em> <a href="#locations()"><code>locations()</code></a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#inheritProperties()"><code>inheritProperties()</code></a></li>
<li><a href="#locations()"><code>locations()</code></a></li>
<li><a href="../../core/env/PropertySource.html" title="class in org.springframework.core.env"><code>PropertySource</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>{}</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="inheritProperties()">
<h3>inheritProperties</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">inheritProperties</span></div>
<div class="block">Whether inlined test <a href="#properties()"><code>properties()</code></a> from superclasses and
enclosing classes should be <em>inherited</em>.
<p>The default value is <code>true</code>, which means that a test class will
<em>inherit</em> inlined properties defined by a superclass or enclosing
class. Specifically, the inlined properties for a test class will be
appended to the list of inlined properties defined by a superclass or
enclosing class. Thus, subclasses and nested classes have the option of
<em>extending</em> the list of inlined test properties.
<p>If <code>inheritProperties</code> is set to <code>false</code>, the inlined
properties for the test class will <em>shadow</em> and effectively
replace any inlined properties defined by a superclass or enclosing class.
<p>In the following example, the <code>ApplicationContext</code> for
<code>BaseTest</code> will be loaded using only the inlined <code>key1</code>
property. In contrast, the <code>ApplicationContext</code> for
<code>ExtendedTest</code> will be loaded using the inlined <code>key1</code>
<strong>and</strong> <code>key2</code> properties.
<pre class="code">
&#064;TestPropertySource(properties = "key1 = value1")
&#064;ContextConfiguration
public class BaseTest {
  // ...
}
&#064;TestPropertySource(properties = "key2 = value2")
&#064;ContextConfiguration
public class ExtendedTest extends BaseTest {
  // ...
}</pre>
<p>If <code>@TestPropertySource</code> is used as a <em><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Repeatable.html" title="class or interface in java.lang.annotation" class="external-link">repeatable</a></em> annotation, the following special rules apply.
<ol>
<li>All <code>@TestPropertySource</code> annotations at a given level in the
test class hierarchy (i.e., directly present or meta-present on a test
class) are considered to be <em>local</em> annotations, in contrast to
<code>@TestPropertySource</code> annotations that are inherited from a
superclass or enclosing class.</li>
<li>All local <code>@TestPropertySource</code> annotations must declare the
same value for the <code>inheritProperties</code> flag.</li>
<li>The <code>inheritProperties</code> flag is not taken into account between
local <code>@TestPropertySource</code> annotations. Specifically, inlined
properties for one local annotation will be appended to the list of
inlined properties defined by previous local annotations. This allows a
local annotation to extend the list of inlined properties, potentially
overriding individual properties.</li>
</ol></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#properties()"><code>properties()</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>true</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="encoding()">
<h3>encoding</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">encoding</span></div>
<div class="block">Specify the character encoding for the given <a href="#locations()">resources</a>
&mdash; for example, "UTF-8".
<p>If not specified, the default character encoding of the JVM will be used.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>6.1</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>""</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="factory()">
<h3>factory</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;? extends <a href="../../core/io/support/PropertySourceFactory.html" title="interface in org.springframework.core.io.support">PropertySourceFactory</a>&gt;</span>&nbsp;<span class="element-name">factory</span></div>
<div class="block">Specify a custom <a href="../../core/io/support/PropertySourceFactory.html" title="interface in org.springframework.core.io.support"><code>PropertySourceFactory</code></a>, if any.
<p>By default, a factory for standard resource files will be used which
supports <code>*.properties</code> and <code>*.xml</code> file formats for
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Properties.html" title="class or interface in java.util" class="external-link"><code>Properties</code></a>.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>6.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../core/io/support/DefaultPropertySourceFactory.html" title="class in org.springframework.core.io.support"><code>DefaultPropertySourceFactory</code></a></li>
<li><a href="../../core/io/support/ResourcePropertySource.html" title="class in org.springframework.core.io.support"><code>ResourcePropertySource</code></a></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>org.springframework.core.io.support.PropertySourceFactory.class</code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</body>
</html>

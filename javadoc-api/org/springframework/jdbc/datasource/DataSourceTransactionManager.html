<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>DataSourceTransactionManager (Spring Framework 7.0.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.springframework.jdbc.datasource, class: DataSourceTransactionManager">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/DataSourceTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language">Spring Framework</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.springframework.jdbc.datasource</a></li>
<li><a href="DataSourceTransactionManager.html" class="current-selection">DataSourceTransactionManager</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#nested-class-summary" tabindex="0">Nested Class Summary</a></li>
<li><a href="#field-summary" tabindex="0">Field Summary</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E()" tabindex="0">DataSourceTransactionManager()</a></li>
<li><a href="#%3Cinit%3E(javax.sql.DataSource)" tabindex="0">DataSourceTransactionManager(DataSource)</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#setDataSource(javax.sql.DataSource)" tabindex="0">setDataSource(DataSource)</a></li>
<li><a href="#getDataSource()" tabindex="0">getDataSource()</a></li>
<li><a href="#obtainDataSource()" tabindex="0">obtainDataSource()</a></li>
<li><a href="#setEnforceReadOnly(boolean)" tabindex="0">setEnforceReadOnly(boolean)</a></li>
<li><a href="#isEnforceReadOnly()" tabindex="0">isEnforceReadOnly()</a></li>
<li><a href="#afterPropertiesSet()" tabindex="0">afterPropertiesSet()</a></li>
<li><a href="#getResourceFactory()" tabindex="0">getResourceFactory()</a></li>
<li><a href="#doGetTransaction()" tabindex="0">doGetTransaction()</a></li>
<li><a href="#isExistingTransaction(java.lang.Object)" tabindex="0">isExistingTransaction(Object)</a></li>
<li><a href="#doBegin(java.lang.Object,org.springframework.transaction.TransactionDefinition)" tabindex="0">doBegin(Object, TransactionDefinition)</a></li>
<li><a href="#doSuspend(java.lang.Object)" tabindex="0">doSuspend(Object)</a></li>
<li><a href="#doResume(java.lang.Object,java.lang.Object)" tabindex="0">doResume(Object, Object)</a></li>
<li><a href="#doCommit(org.springframework.transaction.support.DefaultTransactionStatus)" tabindex="0">doCommit(DefaultTransactionStatus)</a></li>
<li><a href="#doRollback(org.springframework.transaction.support.DefaultTransactionStatus)" tabindex="0">doRollback(DefaultTransactionStatus)</a></li>
<li><a href="#doSetRollbackOnly(org.springframework.transaction.support.DefaultTransactionStatus)" tabindex="0">doSetRollbackOnly(DefaultTransactionStatus)</a></li>
<li><a href="#doCleanupAfterCompletion(java.lang.Object)" tabindex="0">doCleanupAfterCompletion(Object)</a></li>
<li><a href="#prepareTransactionalConnection(java.sql.Connection,org.springframework.transaction.TransactionDefinition)" tabindex="0">prepareTransactionalConnection(Connection, TransactionDefinition)</a></li>
<li><a href="#translateException(java.lang.String,java.sql.SQLException)" tabindex="0">translateException(String, SQLException)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class DataSourceTransactionManager" class="title">Class DataSourceTransactionManager</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">org.springframework.transaction.support.AbstractPlatformTransactionManager</a>
<div class="inheritance">org.springframework.jdbc.datasource.DataSourceTransactionManager</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>, <a href="../../beans/factory/InitializingBean.html" title="interface in org.springframework.beans.factory">InitializingBean</a>, <a href="../../transaction/ConfigurableTransactionManager.html" title="interface in org.springframework.transaction">ConfigurableTransactionManager</a>, <a href="../../transaction/PlatformTransactionManager.html" title="interface in org.springframework.transaction">PlatformTransactionManager</a>, <a href="../../transaction/support/ResourceTransactionManager.html" title="interface in org.springframework.transaction.support">ResourceTransactionManager</a>, <a href="../../transaction/TransactionManager.html" title="interface in org.springframework.transaction">TransactionManager</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="../support/JdbcTransactionManager.html" title="class in org.springframework.jdbc.support">JdbcTransactionManager</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">DataSourceTransactionManager</span>
<span class="extends-implements">extends <a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a>
implements <a href="../../transaction/support/ResourceTransactionManager.html" title="interface in org.springframework.transaction.support">ResourceTransactionManager</a>, <a href="../../beans/factory/InitializingBean.html" title="interface in org.springframework.beans.factory">InitializingBean</a></span></div>
<div class="block"><a href="../../transaction/PlatformTransactionManager.html" title="interface in org.springframework.transaction"><code>PlatformTransactionManager</code></a> implementation
for a single JDBC <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link"><code>DataSource</code></a>. This class is capable of working
in any environment with any JDBC driver, as long as the setup uses a
<code>javax.sql.DataSource</code> as its <code>Connection</code> factory mechanism.
Binds a JDBC <code>Connection</code> from the specified <code>DataSource</code> to the
current thread, potentially allowing for one thread-bound <code>Connection</code>
per <code>DataSource</code>.

<p><b>Note: The <code>DataSource</code> that this transaction manager operates on
needs to return independent <code>Connection</code>s.</b> The <code>Connection</code>s
typically come from a connection pool but the <code>DataSource</code> must not return
specifically scoped or constrained <code>Connection</code>s. This transaction manager
will associate <code>Connection</code>s with thread-bound transactions, according
to the specified propagation behavior. It assumes that a separate, independent
<code>Connection</code> can be obtained even during an ongoing transaction.

<p>Application code is required to retrieve the JDBC <code>Connection</code> via
<a href="DataSourceUtils.html#getConnection(javax.sql.DataSource)"><code>DataSourceUtils.getConnection(DataSource)</code></a> instead of a standard
EE-style <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html#getConnection()" title="class or interface in javax.sql" class="external-link"><code>DataSource.getConnection()</code></a> call. Spring classes such as
<a href="../core/JdbcTemplate.html" title="class in org.springframework.jdbc.core"><code>JdbcTemplate</code></a> use this strategy implicitly.
If not used in combination with this transaction manager, the
<a href="DataSourceUtils.html" title="class in org.springframework.jdbc.datasource"><code>DataSourceUtils</code></a> lookup strategy behaves exactly like the native
<code>DataSource</code> lookup; it can thus be used in a portable fashion.

<p>Alternatively, you can allow application code to work with the standard
EE-style lookup pattern <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html#getConnection()" title="class or interface in javax.sql" class="external-link"><code>DataSource.getConnection()</code></a>, for example
for legacy code that is not aware of Spring at all. In that case, define a
<a href="TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>TransactionAwareDataSourceProxy</code></a> for your target <code>DataSource</code>,
and pass that proxy <code>DataSource</code> to your DAOs which will automatically
participate in Spring-managed transactions when accessing it.

<p>Supports custom isolation levels, and timeouts which get applied as
appropriate JDBC statement timeouts. To support the latter, application code
must either use <a href="../core/JdbcTemplate.html" title="class in org.springframework.jdbc.core"><code>JdbcTemplate</code></a>, call
<a href="DataSourceUtils.html#applyTransactionTimeout(java.sql.Statement,javax.sql.DataSource)"><code>DataSourceUtils.applyTransactionTimeout(Statement, DataSource)</code></a> for each created JDBC
<code>Statement</code>, or go through a <a href="TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>TransactionAwareDataSourceProxy</code></a>
which will create timeout-aware JDBC <code>Connection</code>s and <code>Statement</code>s
automatically.

<p>Consider defining a <a href="LazyConnectionDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>LazyConnectionDataSourceProxy</code></a> for your target
<code>DataSource</code>, pointing both this transaction manager and your DAOs to it.
This will lead to optimized handling of "empty" transactions, i.e. of transactions
without any JDBC statements executed. A <code>LazyConnectionDataSourceProxy</code> will
not fetch an actual JDBC <code>Connection</code> from the target <code>DataSource</code>
until a <code>Statement</code> gets executed, lazily applying the specified transaction
settings to the target <code>Connection</code>.

<p>This transaction manager supports nested transactions via the JDBC
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Savepoint.html" title="class or interface in java.sql" class="external-link"><code>Savepoint</code></a> mechanism. The
<a href="../../transaction/support/AbstractPlatformTransactionManager.html#setNestedTransactionAllowed(boolean)"><code>"nestedTransactionAllowed"</code></a> flag defaults
to "true", since nested transactions will work without restrictions on JDBC
drivers that support savepoints (such as the Oracle JDBC driver).

<p>This transaction manager can be used as a replacement for the
<a href="../../transaction/jta/JtaTransactionManager.html" title="class in org.springframework.transaction.jta"><code>JtaTransactionManager</code></a> in the single
resource case, as it does not require a container that supports JTA, typically
in combination with a locally defined JDBC <code>DataSource</code> (for example, a Hikari
connection pool). Switching between this local strategy and a JTA environment
is just a matter of configuration!

<p>As of 4.3.4, this transaction manager triggers flush callbacks on registered
transaction synchronizations (if synchronization is generally active), assuming
resources operating on the underlying JDBC <code>Connection</code>. This allows for
setup analogous to <code>JtaTransactionManager</code>, in particular with respect to
lazily registered ORM resources (for example, a Hibernate <code>Session</code>).

<p><b>NOTE: As of 5.3, <a href="../support/JdbcTransactionManager.html" title="class in org.springframework.jdbc.support"><code>JdbcTransactionManager</code></a>
is available as an extended subclass which includes commit/rollback exception
translation, aligned with <a href="../core/JdbcTemplate.html" title="class in org.springframework.jdbc.core"><code>JdbcTemplate</code></a>.</b></div>
<dl class="notes">
<dt>Since:</dt>
<dd>02.05.2003</dd>
<dt>Author:</dt>
<dd>Juergen Hoeller</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../transaction/support/AbstractPlatformTransactionManager.html#setNestedTransactionAllowed(boolean)"><code>AbstractPlatformTransactionManager.setNestedTransactionAllowed(boolean)</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Savepoint.html" title="class or interface in java.sql" class="external-link"><code>Savepoint</code></a></li>
<li><a href="DataSourceUtils.html#getConnection(javax.sql.DataSource)"><code>DataSourceUtils.getConnection(javax.sql.DataSource)</code></a></li>
<li><a href="DataSourceUtils.html#applyTransactionTimeout(java.sql.Statement,javax.sql.DataSource)"><code>DataSourceUtils.applyTransactionTimeout(Statement, DataSource)</code></a></li>
<li><a href="DataSourceUtils.html#releaseConnection(java.sql.Connection,javax.sql.DataSource)"><code>DataSourceUtils.releaseConnection(Connection, DataSource)</code></a></li>
<li><a href="TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>TransactionAwareDataSourceProxy</code></a></li>
<li><a href="LazyConnectionDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>LazyConnectionDataSourceProxy</code></a></li>
<li><a href="../core/JdbcTemplate.html" title="class in org.springframework.jdbc.core"><code>JdbcTemplate</code></a></li>
<li><a href="../support/JdbcTransactionManager.html" title="class in org.springframework.jdbc.support"><code>JdbcTransactionManager</code></a></li>
<li><a href="../../../../serialized-form.html#org.springframework.jdbc.datasource.DataSourceTransactionManager">Serialized Form</a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h3 id="nested-classes-inherited-from-class-org.springframework.transaction.support.AbstractPlatformTransactionManager">Nested classes/interfaces inherited from class&nbsp;<a href="../../transaction/support/AbstractPlatformTransactionManager.html#nested-class-summary" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></h3>
<code><a href="../../transaction/support/AbstractPlatformTransactionManager.SuspendedResourcesHolder.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager.SuspendedResourcesHolder</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.springframework.transaction.support.AbstractPlatformTransactionManager">Fields inherited from class&nbsp;<a href="../../transaction/support/AbstractPlatformTransactionManager.html#field-summary" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></h3>
<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#logger">logger</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#SYNCHRONIZATION_ALWAYS">SYNCHRONIZATION_ALWAYS</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#SYNCHRONIZATION_NEVER">SYNCHRONIZATION_NEVER</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#SYNCHRONIZATION_ON_ACTUAL_TRANSACTION">SYNCHRONIZATION_ON_ACTUAL_TRANSACTION</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">DataSourceTransactionManager</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Create a new <code>DataSourceTransactionManager</code> instance.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(javax.sql.DataSource)" class="member-name-link">DataSourceTransactionManager</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource)</code></div>
<div class="col-last odd-row-color">
<div class="block">Create a new <code>DataSourceTransactionManager</code> instance.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#afterPropertiesSet()" class="member-name-link">afterPropertiesSet</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invoked by the containing <code>BeanFactory</code> after it has set all bean properties
and satisfied <a href="../../beans/factory/BeanFactoryAware.html" title="interface in org.springframework.beans.factory"><code>BeanFactoryAware</code></a>, <code>ApplicationContextAware</code> etc.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doBegin(java.lang.Object,org.springframework.transaction.TransactionDefinition)" class="member-name-link">doBegin</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction,
 <a href="../../transaction/TransactionDefinition.html" title="interface in org.springframework.transaction">TransactionDefinition</a>&nbsp;definition)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Begin a new transaction with semantics according to the given transaction
definition.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doCleanupAfterCompletion(java.lang.Object)" class="member-name-link">doCleanupAfterCompletion</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Cleanup resources after transaction completion.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doCommit(org.springframework.transaction.support.DefaultTransactionStatus)" class="member-name-link">doCommit</a><wbr>(<a href="../../transaction/support/DefaultTransactionStatus.html" title="class in org.springframework.transaction.support">DefaultTransactionStatus</a>&nbsp;status)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Perform an actual commit of the given transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doGetTransaction()" class="member-name-link">doGetTransaction</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return a transaction object for the current transaction state.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doResume(java.lang.Object,java.lang.Object)" class="member-name-link">doResume</a><wbr>(<a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;suspendedResources)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Resume the resources of the current transaction.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doRollback(org.springframework.transaction.support.DefaultTransactionStatus)" class="member-name-link">doRollback</a><wbr>(<a href="../../transaction/support/DefaultTransactionStatus.html" title="class in org.springframework.transaction.support">DefaultTransactionStatus</a>&nbsp;status)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Perform an actual rollback of the given transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doSetRollbackOnly(org.springframework.transaction.support.DefaultTransactionStatus)" class="member-name-link">doSetRollbackOnly</a><wbr>(<a href="../../transaction/support/DefaultTransactionStatus.html" title="class in org.springframework.transaction.support">DefaultTransactionStatus</a>&nbsp;status)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the given transaction rollback-only.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doSuspend(java.lang.Object)" class="member-name-link">doSuspend</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Suspend the resources of the current transaction.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDataSource()" class="member-name-link">getDataSource</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the JDBC <code>DataSource</code> that this instance manages transactions for.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getResourceFactory()" class="member-name-link">getResourceFactory</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the resource factory that this transaction manager operates on,
for example, a JDBC DataSource or a JMS ConnectionFactory.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEnforceReadOnly()" class="member-name-link">isEnforceReadOnly</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return whether to enforce the read-only nature of a transaction
through an explicit statement on the transactional connection.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isExistingTransaction(java.lang.Object)" class="member-name-link">isExistingTransaction</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check if the given transaction object indicates an existing transaction
(that is, a transaction which has already started).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#obtainDataSource()" class="member-name-link">obtainDataSource</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Obtain the <code>DataSource</code> for actual use.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#prepareTransactionalConnection(java.sql.Connection,org.springframework.transaction.TransactionDefinition)" class="member-name-link">prepareTransactionalConnection</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;con,
 <a href="../../transaction/TransactionDefinition.html" title="interface in org.springframework.transaction">TransactionDefinition</a>&nbsp;definition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Prepare the transactional <code>Connection</code> right after transaction begin.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDataSource(javax.sql.DataSource)" class="member-name-link">setDataSource</a><wbr>(<a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the JDBC <code>DataSource</code> that this instance should manage transactions for.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setEnforceReadOnly(boolean)" class="member-name-link">setEnforceReadOnly</a><wbr>(boolean&nbsp;enforceReadOnly)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Specify whether to enforce the read-only nature of a transaction
(as indicated by <a href="../../transaction/TransactionDefinition.html#isReadOnly()"><code>TransactionDefinition.isReadOnly()</code></a>)
through an explicit statement on the transactional connection:
"SET TRANSACTION READ ONLY" as understood by Oracle, MySQL and Postgres.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/RuntimeException.html" title="class or interface in java.lang" class="external-link">RuntimeException</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#translateException(java.lang.String,java.sql.SQLException)" class="member-name-link">translateException</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;task,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a>&nbsp;ex)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Translate the given JDBC commit/rollback exception to a common Spring
exception to propagate from the <a href="../../transaction/support/AbstractPlatformTransactionManager.html#commit(org.springframework.transaction.TransactionStatus)"><code>AbstractPlatformTransactionManager.commit(TransactionStatus)</code></a>/<a href="../../transaction/support/AbstractPlatformTransactionManager.html#rollback(org.springframework.transaction.TransactionStatus)"><code>AbstractPlatformTransactionManager.rollback(TransactionStatus)</code></a> call.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.transaction.support.AbstractPlatformTransactionManager">Methods inherited from class&nbsp;<a href="../../transaction/support/AbstractPlatformTransactionManager.html#method-summary" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></h3>
<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#commit(org.springframework.transaction.TransactionStatus)" title="commit(TransactionStatus)">commit</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#determineTimeout(org.springframework.transaction.TransactionDefinition)" title="determineTimeout(TransactionDefinition)">determineTimeout</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#getDefaultTimeout()" title="getDefaultTimeout()">getDefaultTimeout</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#getTransaction(org.springframework.transaction.TransactionDefinition)" title="getTransaction(TransactionDefinition)">getTransaction</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#getTransactionExecutionListeners()" title="getTransactionExecutionListeners()">getTransactionExecutionListeners</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#getTransactionSynchronization()" title="getTransactionSynchronization()">getTransactionSynchronization</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#invokeAfterCompletion(java.util.List,int)" title="invokeAfterCompletion(List, int)">invokeAfterCompletion</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#isFailEarlyOnGlobalRollbackOnly()" title="isFailEarlyOnGlobalRollbackOnly()">isFailEarlyOnGlobalRollbackOnly</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#isGlobalRollbackOnParticipationFailure()" title="isGlobalRollbackOnParticipationFailure()">isGlobalRollbackOnParticipationFailure</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#isNestedTransactionAllowed()" title="isNestedTransactionAllowed()">isNestedTransactionAllowed</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#isRollbackOnCommitFailure()" title="isRollbackOnCommitFailure()">isRollbackOnCommitFailure</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#isValidateExistingTransaction()" title="isValidateExistingTransaction()">isValidateExistingTransaction</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#prepareForCommit(org.springframework.transaction.support.DefaultTransactionStatus)" title="prepareForCommit(DefaultTransactionStatus)">prepareForCommit</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#prepareSynchronization(org.springframework.transaction.support.DefaultTransactionStatus,org.springframework.transaction.TransactionDefinition)" title="prepareSynchronization(DefaultTransactionStatus, TransactionDefinition)">prepareSynchronization</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#registerAfterCompletionWithExistingTransaction(java.lang.Object,java.util.List)" title="registerAfterCompletionWithExistingTransaction(Object, List)">registerAfterCompletionWithExistingTransaction</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#resume(java.lang.Object,org.springframework.transaction.support.AbstractPlatformTransactionManager.SuspendedResourcesHolder)" title="resume(Object, AbstractPlatformTransactionManager.SuspendedResourcesHolder)">resume</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#rollback(org.springframework.transaction.TransactionStatus)" title="rollback(TransactionStatus)">rollback</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setDefaultTimeout(int)" title="setDefaultTimeout(int)">setDefaultTimeout</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setFailEarlyOnGlobalRollbackOnly(boolean)" title="setFailEarlyOnGlobalRollbackOnly(boolean)">setFailEarlyOnGlobalRollbackOnly</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setGlobalRollbackOnParticipationFailure(boolean)" title="setGlobalRollbackOnParticipationFailure(boolean)">setGlobalRollbackOnParticipationFailure</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setNestedTransactionAllowed(boolean)" title="setNestedTransactionAllowed(boolean)">setNestedTransactionAllowed</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setRollbackOnCommitFailure(boolean)" title="setRollbackOnCommitFailure(boolean)">setRollbackOnCommitFailure</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setTransactionExecutionListeners(java.util.Collection)" title="setTransactionExecutionListeners(Collection)">setTransactionExecutionListeners</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setTransactionSynchronization(int)" title="setTransactionSynchronization(int)">setTransactionSynchronization</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setTransactionSynchronizationName(java.lang.String)" title="setTransactionSynchronizationName(String)">setTransactionSynchronizationName</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#setValidateExistingTransaction(boolean)" title="setValidateExistingTransaction(boolean)">setValidateExistingTransaction</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#shouldCommitOnGlobalRollbackOnly()" title="shouldCommitOnGlobalRollbackOnly()">shouldCommitOnGlobalRollbackOnly</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#suspend(java.lang.Object)" title="suspend(Object)">suspend</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#triggerBeforeCommit(org.springframework.transaction.support.DefaultTransactionStatus)" title="triggerBeforeCommit(DefaultTransactionStatus)">triggerBeforeCommit</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#triggerBeforeCompletion(org.springframework.transaction.support.DefaultTransactionStatus)" title="triggerBeforeCompletion(DefaultTransactionStatus)">triggerBeforeCompletion</a>, <a href="../../transaction/support/AbstractPlatformTransactionManager.html#useSavepointForNestedTransaction()" title="useSavepointForNestedTransaction()">useSavepointForNestedTransaction</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.transaction.ConfigurableTransactionManager">Methods inherited from interface&nbsp;<a href="../../transaction/ConfigurableTransactionManager.html#method-summary" title="interface in org.springframework.transaction">ConfigurableTransactionManager</a></h3>
<code><a href="../../transaction/ConfigurableTransactionManager.html#addListener(org.springframework.transaction.TransactionExecutionListener)" title="addListener(TransactionExecutionListener)">addListener</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.transaction.PlatformTransactionManager">Methods inherited from interface&nbsp;<a href="../../transaction/PlatformTransactionManager.html#method-summary" title="interface in org.springframework.transaction">PlatformTransactionManager</a></h3>
<code><a href="../../transaction/PlatformTransactionManager.html#commit(org.springframework.transaction.TransactionStatus)" title="commit(TransactionStatus)">commit</a>, <a href="../../transaction/PlatformTransactionManager.html#getTransaction(org.springframework.transaction.TransactionDefinition)" title="getTransaction(TransactionDefinition)">getTransaction</a>, <a href="../../transaction/PlatformTransactionManager.html#rollback(org.springframework.transaction.TransactionStatus)" title="rollback(TransactionStatus)">rollback</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>DataSourceTransactionManager</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">DataSourceTransactionManager</span>()</div>
<div class="block">Create a new <code>DataSourceTransactionManager</code> instance.
A <code>DataSource</code> has to be set to be able to use it.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setDataSource(javax.sql.DataSource)"><code>setDataSource(DataSource)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(javax.sql.DataSource)">
<h3>DataSourceTransactionManager</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">DataSourceTransactionManager</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource)</span></div>
<div class="block">Create a new <code>DataSourceTransactionManager</code> instance.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dataSource</code> - the JDBC DataSource to manage transactions for</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setDataSource(javax.sql.DataSource)">
<h3>setDataSource</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setDataSource</span><wbr><span class="parameters">(<a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;dataSource)</span></div>
<div class="block">Set the JDBC <code>DataSource</code> that this instance should manage transactions for.
<p>This will typically be a locally defined <code>DataSource</code>, for example a
Hikari connection pool. Alternatively, you can also manage transactions for a
non-XA <code>DataSource</code> fetched from JNDI. For an XA <code>DataSource</code>,
use <a href="../../transaction/jta/JtaTransactionManager.html" title="class in org.springframework.transaction.jta"><code>JtaTransactionManager</code></a> instead.
<p>The <code>DataSource</code> specified here should be the target <code>DataSource</code>
to manage transactions for, not a <a href="TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>TransactionAwareDataSourceProxy</code></a>.
Only data access code may work with <code>TransactionAwareDataSourceProxy</code> while
the transaction manager needs to work on the underlying target <code>DataSource</code>.
If there is nevertheless a <code>TransactionAwareDataSourceProxy</code> passed in,
it will be unwrapped to extract its target <code>DataSource</code>.
<p><b>The <code>DataSource</code> passed in here needs to return independent
<code>Connection</code>s.</b> The <code>Connection</code>s typically come from a
connection pool but the <code>DataSource</code> must not return specifically
scoped or constrained <code>Connection</code>s, just possibly lazily fetched.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="LazyConnectionDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>LazyConnectionDataSourceProxy</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getDataSource()">
<h3>getDataSource</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></span>&nbsp;<span class="element-name">getDataSource</span>()</div>
<div class="block">Return the JDBC <code>DataSource</code> that this instance manages transactions for.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="obtainDataSource()">
<h3>obtainDataSource</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></span>&nbsp;<span class="element-name">obtainDataSource</span>()</div>
<div class="block">Obtain the <code>DataSource</code> for actual use.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the DataSource (never <code>null</code>)</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - in case of no DataSource set</dd>
<dt>Since:</dt>
<dd>5.0</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setEnforceReadOnly(boolean)">
<h3>setEnforceReadOnly</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setEnforceReadOnly</span><wbr><span class="parameters">(boolean&nbsp;enforceReadOnly)</span></div>
<div class="block">Specify whether to enforce the read-only nature of a transaction
(as indicated by <a href="../../transaction/TransactionDefinition.html#isReadOnly()"><code>TransactionDefinition.isReadOnly()</code></a>)
through an explicit statement on the transactional connection:
"SET TRANSACTION READ ONLY" as understood by Oracle, MySQL and Postgres.
<p>The exact treatment, including any SQL statement executed on the connection,
can be customized through <a href="#prepareTransactionalConnection(java.sql.Connection,org.springframework.transaction.TransactionDefinition)"><code>prepareTransactionalConnection(Connection, TransactionDefinition)</code></a>.
<p>This mode of read-only handling goes beyond the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setReadOnly(boolean)" title="class or interface in java.sql" class="external-link"><code>Connection.setReadOnly(boolean)</code></a>
hint that Spring applies by default. In contrast to that standard JDBC hint,
"SET TRANSACTION READ ONLY" enforces an isolation-level-like connection mode
where data manipulation statements are strictly disallowed. Also, on Oracle,
this read-only mode provides read consistency for the entire transaction.
<p>Note that older Oracle JDBC drivers (9i, 10g) used to enforce this read-only
mode even for <code>Connection.setReadOnly(true</code>. However, with recent drivers,
this strong enforcement needs to be applied explicitly, for example, through this flag.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>4.3.7</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#prepareTransactionalConnection(java.sql.Connection,org.springframework.transaction.TransactionDefinition)"><code>prepareTransactionalConnection(Connection, TransactionDefinition)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isEnforceReadOnly()">
<h3>isEnforceReadOnly</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEnforceReadOnly</span>()</div>
<div class="block">Return whether to enforce the read-only nature of a transaction
through an explicit statement on the transactional connection.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>4.3.7</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setEnforceReadOnly(boolean)"><code>setEnforceReadOnly(boolean)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="afterPropertiesSet()">
<h3>afterPropertiesSet</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">afterPropertiesSet</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../../beans/factory/InitializingBean.html#afterPropertiesSet()">InitializingBean</a></code></span></div>
<div class="block">Invoked by the containing <code>BeanFactory</code> after it has set all bean properties
and satisfied <a href="../../beans/factory/BeanFactoryAware.html" title="interface in org.springframework.beans.factory"><code>BeanFactoryAware</code></a>, <code>ApplicationContextAware</code> etc.
<p>This method allows the bean instance to perform validation of its overall
configuration and final initialization when all bean properties have been set.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../beans/factory/InitializingBean.html#afterPropertiesSet()">afterPropertiesSet</a></code>&nbsp;in interface&nbsp;<code><a href="../../beans/factory/InitializingBean.html" title="interface in org.springframework.beans.factory">InitializingBean</a></code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getResourceFactory()">
<h3>getResourceFactory</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">getResourceFactory</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../../transaction/support/ResourceTransactionManager.html#getResourceFactory()">ResourceTransactionManager</a></code></span></div>
<div class="block">Return the resource factory that this transaction manager operates on,
for example, a JDBC DataSource or a JMS ConnectionFactory.
<p>This target resource factory is usually used as resource key for
<a href="../../transaction/support/TransactionSynchronizationManager.html" title="class in org.springframework.transaction.support"><code>TransactionSynchronizationManager</code></a>'s resource bindings per thread.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../transaction/support/ResourceTransactionManager.html#getResourceFactory()">getResourceFactory</a></code>&nbsp;in interface&nbsp;<code><a href="../../transaction/support/ResourceTransactionManager.html" title="interface in org.springframework.transaction.support">ResourceTransactionManager</a></code></dd>
<dt>Returns:</dt>
<dd>the target resource factory (never <code>null</code>)</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../transaction/support/TransactionSynchronizationManager.html#bindResource(java.lang.Object,java.lang.Object)"><code>TransactionSynchronizationManager.bindResource(Object, Object)</code></a></li>
<li><a href="../../transaction/support/TransactionSynchronizationManager.html#getResource(java.lang.Object)"><code>TransactionSynchronizationManager.getResource(Object)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="doGetTransaction()">
<h3>doGetTransaction</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">doGetTransaction</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doGetTransaction()">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Return a transaction object for the current transaction state.
<p>The returned object will usually be specific to the concrete transaction
manager implementation, carrying corresponding transaction state in a
modifiable fashion. This object will be passed into the other template
methods (for example, doBegin and doCommit), either directly or as part of a
DefaultTransactionStatus instance.
<p>The returned object should contain information about any existing
transaction, that is, a transaction that has already started before the
current <code>getTransaction</code> call on the transaction manager.
Consequently, a <code>doGetTransaction</code> implementation will usually
look for an existing transaction and store corresponding state in the
returned transaction object.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doGetTransaction()">doGetTransaction</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Returns:</dt>
<dd>the current transaction object</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doBegin(java.lang.Object,org.springframework.transaction.TransactionDefinition)"><code>AbstractPlatformTransactionManager.doBegin(Object, TransactionDefinition)</code></a></li>
<li><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doCommit(org.springframework.transaction.support.DefaultTransactionStatus)"><code>AbstractPlatformTransactionManager.doCommit(DefaultTransactionStatus)</code></a></li>
<li><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doRollback(org.springframework.transaction.support.DefaultTransactionStatus)"><code>AbstractPlatformTransactionManager.doRollback(DefaultTransactionStatus)</code></a></li>
<li><a href="../../transaction/support/DefaultTransactionStatus.html#getTransaction()"><code>DefaultTransactionStatus.getTransaction()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="isExistingTransaction(java.lang.Object)">
<h3>isExistingTransaction</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isExistingTransaction</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#isExistingTransaction(java.lang.Object)">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Check if the given transaction object indicates an existing transaction
(that is, a transaction which has already started).
<p>The result will be evaluated according to the specified propagation
behavior for the new transaction. An existing transaction might get
suspended (in case of PROPAGATION_REQUIRES_NEW), or the new transaction
might participate in the existing one (in case of PROPAGATION_REQUIRED).
<p>The default implementation returns <code>false</code>, assuming that
participating in existing transactions is generally not supported.
Subclasses are of course encouraged to provide such support.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#isExistingTransaction(java.lang.Object)">isExistingTransaction</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - the transaction object returned by doGetTransaction</dd>
<dt>Returns:</dt>
<dd>if there is an existing transaction</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doGetTransaction()"><code>AbstractPlatformTransactionManager.doGetTransaction()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="doBegin(java.lang.Object,org.springframework.transaction.TransactionDefinition)">
<h3>doBegin</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doBegin</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction,
 <a href="../../transaction/TransactionDefinition.html" title="interface in org.springframework.transaction">TransactionDefinition</a>&nbsp;definition)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doBegin(java.lang.Object,org.springframework.transaction.TransactionDefinition)">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Begin a new transaction with semantics according to the given transaction
definition. Does not have to care about applying the propagation behavior,
as this has already been handled by this abstract manager.
<p>This method gets called when the transaction manager has decided to actually
start a new transaction. Either there wasn't any transaction before, or the
previous transaction has been suspended.
<p>A special scenario is a nested transaction without savepoint: If
<code>useSavepointForNestedTransaction()</code> returns "false", this method
will be called to start a nested transaction when necessary. In such a context,
there will be an active transaction: The implementation of this method has
to detect this and start an appropriate nested transaction.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doBegin(java.lang.Object,org.springframework.transaction.TransactionDefinition)">doBegin</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - the transaction object returned by <code>doGetTransaction</code></dd>
<dd><code>definition</code> - a TransactionDefinition instance, describing propagation
behavior, isolation level, read-only flag, timeout, and transaction name</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="doSuspend(java.lang.Object)">
<h3>doSuspend</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="element-name">doSuspend</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doSuspend(java.lang.Object)">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Suspend the resources of the current transaction.
Transaction synchronization will already have been suspended.
<p>The default implementation throws a TransactionSuspensionNotSupportedException,
assuming that transaction suspension is generally not supported.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doSuspend(java.lang.Object)">doSuspend</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - the transaction object returned by <code>doGetTransaction</code></dd>
<dt>Returns:</dt>
<dd>an object that holds suspended resources
(will be kept unexamined for passing it into doResume)</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doResume(java.lang.Object,java.lang.Object)"><code>AbstractPlatformTransactionManager.doResume(Object, Object)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="doResume(java.lang.Object,java.lang.Object)">
<h3>doResume</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doResume</span><wbr><span class="parameters">(<a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;suspendedResources)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doResume(java.lang.Object,java.lang.Object)">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Resume the resources of the current transaction.
Transaction synchronization will be resumed afterwards.
<p>The default implementation throws a TransactionSuspensionNotSupportedException,
assuming that transaction suspension is generally not supported.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doResume(java.lang.Object,java.lang.Object)">doResume</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - the transaction object returned by <code>doGetTransaction</code></dd>
<dd><code>suspendedResources</code> - the object that holds suspended resources,
as returned by doSuspend</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doSuspend(java.lang.Object)"><code>AbstractPlatformTransactionManager.doSuspend(Object)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="doCommit(org.springframework.transaction.support.DefaultTransactionStatus)">
<h3>doCommit</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doCommit</span><wbr><span class="parameters">(<a href="../../transaction/support/DefaultTransactionStatus.html" title="class in org.springframework.transaction.support">DefaultTransactionStatus</a>&nbsp;status)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doCommit(org.springframework.transaction.support.DefaultTransactionStatus)">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Perform an actual commit of the given transaction.
<p>An implementation does not need to check the "new transaction" flag
or the rollback-only flag; this will already have been handled before.
Usually, a straight commit will be performed on the transaction object
contained in the passed-in status.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doCommit(org.springframework.transaction.support.DefaultTransactionStatus)">doCommit</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - the status representation of the transaction</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../transaction/support/DefaultTransactionStatus.html#getTransaction()"><code>DefaultTransactionStatus.getTransaction()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="doRollback(org.springframework.transaction.support.DefaultTransactionStatus)">
<h3>doRollback</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doRollback</span><wbr><span class="parameters">(<a href="../../transaction/support/DefaultTransactionStatus.html" title="class in org.springframework.transaction.support">DefaultTransactionStatus</a>&nbsp;status)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doRollback(org.springframework.transaction.support.DefaultTransactionStatus)">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Perform an actual rollback of the given transaction.
<p>An implementation does not need to check the "new transaction" flag;
this will already have been handled before. Usually, a straight rollback
will be performed on the transaction object contained in the passed-in status.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doRollback(org.springframework.transaction.support.DefaultTransactionStatus)">doRollback</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - the status representation of the transaction</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="../../transaction/support/DefaultTransactionStatus.html#getTransaction()"><code>DefaultTransactionStatus.getTransaction()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="doSetRollbackOnly(org.springframework.transaction.support.DefaultTransactionStatus)">
<h3>doSetRollbackOnly</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doSetRollbackOnly</span><wbr><span class="parameters">(<a href="../../transaction/support/DefaultTransactionStatus.html" title="class in org.springframework.transaction.support">DefaultTransactionStatus</a>&nbsp;status)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doSetRollbackOnly(org.springframework.transaction.support.DefaultTransactionStatus)">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Set the given transaction rollback-only. Only called on rollback
if the current transaction participates in an existing one.
<p>The default implementation throws an IllegalTransactionStateException,
assuming that participating in existing transactions is generally not
supported. Subclasses are of course encouraged to provide such support.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doSetRollbackOnly(org.springframework.transaction.support.DefaultTransactionStatus)">doSetRollbackOnly</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Parameters:</dt>
<dd><code>status</code> - the status representation of the transaction</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="doCleanupAfterCompletion(java.lang.Object)">
<h3>doCleanupAfterCompletion</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">doCleanupAfterCompletion</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;transaction)</span></div>
<div class="block"><span class="description-from-type-label">Description copied from class:&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doCleanupAfterCompletion(java.lang.Object)">AbstractPlatformTransactionManager</a></code></span></div>
<div class="block">Cleanup resources after transaction completion.
<p>Called after <code>doCommit</code> and <code>doRollback</code> execution,
on any outcome. The default implementation does nothing.
<p>Should not throw any exceptions but just issue warnings on errors.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="../../transaction/support/AbstractPlatformTransactionManager.html#doCleanupAfterCompletion(java.lang.Object)">doCleanupAfterCompletion</a></code>&nbsp;in class&nbsp;<code><a href="../../transaction/support/AbstractPlatformTransactionManager.html" title="class in org.springframework.transaction.support">AbstractPlatformTransactionManager</a></code></dd>
<dt>Parameters:</dt>
<dd><code>transaction</code> - the transaction object returned by <code>doGetTransaction</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="prepareTransactionalConnection(java.sql.Connection,org.springframework.transaction.TransactionDefinition)">
<h3>prepareTransactionalConnection</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">prepareTransactionalConnection</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;con,
 <a href="../../transaction/TransactionDefinition.html" title="interface in org.springframework.transaction">TransactionDefinition</a>&nbsp;definition)</span>
                                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Prepare the transactional <code>Connection</code> right after transaction begin.
<p>The default implementation executes a "SET TRANSACTION READ ONLY" statement
if the <a href="#setEnforceReadOnly(boolean)"><code>"enforceReadOnly"</code></a> flag is set to <code>true</code>
and the transaction definition indicates a read-only transaction.
<p>The "SET TRANSACTION READ ONLY" is understood by Oracle, MySQL and Postgres
and may work with other databases as well. If you'd like to adapt this treatment,
override this method accordingly.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>con</code> - the transactional JDBC Connection</dd>
<dd><code>definition</code> - the current transaction definition</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if thrown by JDBC API</dd>
<dt>Since:</dt>
<dd>4.3.7</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="#setEnforceReadOnly(boolean)"><code>setEnforceReadOnly(boolean)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="translateException(java.lang.String,java.sql.SQLException)">
<h3>translateException</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/RuntimeException.html" title="class or interface in java.lang" class="external-link">RuntimeException</a></span>&nbsp;<span class="element-name">translateException</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;task,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a>&nbsp;ex)</span></div>
<div class="block">Translate the given JDBC commit/rollback exception to a common Spring
exception to propagate from the <a href="../../transaction/support/AbstractPlatformTransactionManager.html#commit(org.springframework.transaction.TransactionStatus)"><code>AbstractPlatformTransactionManager.commit(TransactionStatus)</code></a>/<a href="../../transaction/support/AbstractPlatformTransactionManager.html#rollback(org.springframework.transaction.TransactionStatus)"><code>AbstractPlatformTransactionManager.rollback(TransactionStatus)</code></a> call.
<p>The default implementation throws a <a href="../../transaction/TransactionSystemException.html" title="class in org.springframework.transaction"><code>TransactionSystemException</code></a>.
Subclasses may specifically identify concurrency failures etc.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>task</code> - the task description (commit or rollback)</dd>
<dd><code>ex</code> - the SQLException thrown from commit/rollback</dd>
<dt>Returns:</dt>
<dd>the translated exception to throw, either a
<a href="../../dao/DataAccessException.html" title="class in org.springframework.dao"><code>DataAccessException</code></a> or a
<a href="../../transaction/TransactionException.html" title="class in org.springframework.transaction"><code>TransactionException</code></a></dd>
<dt>Since:</dt>
<dd>5.3</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</body>
</html>

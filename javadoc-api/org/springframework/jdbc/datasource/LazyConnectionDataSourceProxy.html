<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>LazyConnectionDataSourceProxy (Spring Framework 7.0.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.springframework.jdbc.datasource, class: LazyConnectionDataSourceProxy">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/LazyConnectionDataSourceProxy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language">Spring Framework</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.springframework.jdbc.datasource</a></li>
<li><a href="LazyConnectionDataSourceProxy.html" class="current-selection">LazyConnectionDataSourceProxy</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#constructor-summary" tabindex="0">Constructor Summary</a></li>
<li><a href="#method-summary" tabindex="0">Method Summary</a></li>
<li><a href="#constructor-detail" tabindex="0">Constructor Details</a>
<ol class="toc-list">
<li><a href="#%3Cinit%3E()" tabindex="0">LazyConnectionDataSourceProxy()</a></li>
<li><a href="#%3Cinit%3E(javax.sql.DataSource)" tabindex="0">LazyConnectionDataSourceProxy(DataSource)</a></li>
</ol>
</li>
<li><a href="#method-detail" tabindex="0">Method Details</a>
<ol class="toc-list">
<li><a href="#setReadOnlyDataSource(javax.sql.DataSource)" tabindex="0">setReadOnlyDataSource(DataSource)</a></li>
<li><a href="#setDefaultAutoCommit(boolean)" tabindex="0">setDefaultAutoCommit(boolean)</a></li>
<li><a href="#setDefaultTransactionIsolationName(java.lang.String)" tabindex="0">setDefaultTransactionIsolationName(String)</a></li>
<li><a href="#setDefaultTransactionIsolation(int)" tabindex="0">setDefaultTransactionIsolation(int)</a></li>
<li><a href="#checkDefaultConnectionProperties()" tabindex="0">checkDefaultConnectionProperties()</a></li>
<li><a href="#checkDefaultConnectionProperties(java.sql.Connection)" tabindex="0">checkDefaultConnectionProperties(Connection)</a></li>
<li><a href="#defaultAutoCommit()" tabindex="0">defaultAutoCommit()</a></li>
<li><a href="#defaultTransactionIsolation()" tabindex="0">defaultTransactionIsolation()</a></li>
<li><a href="#getConnection()" tabindex="0">getConnection()</a></li>
<li><a href="#getConnection(java.lang.String,java.lang.String)" tabindex="0">getConnection(String, String)</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Class LazyConnectionDataSourceProxy" class="title">Class LazyConnectionDataSourceProxy</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="DelegatingDataSource.html" title="class in org.springframework.jdbc.datasource">org.springframework.jdbc.datasource.DelegatingDataSource</a>
<div class="inheritance">org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Wrapper.html" title="class or interface in java.sql" class="external-link">Wrapper</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/CommonDataSource.html" title="class or interface in javax.sql" class="external-link">CommonDataSource</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>, <a href="../../beans/factory/InitializingBean.html" title="interface in org.springframework.beans.factory">InitializingBean</a></code></dd>
</dl>
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">LazyConnectionDataSourceProxy</span>
<span class="extends-implements">extends <a href="DelegatingDataSource.html" title="class in org.springframework.jdbc.datasource">DelegatingDataSource</a></span></div>
<div class="block">Proxy for a target DataSource, fetching actual JDBC Connections lazily,
i.e. not until first creation of a Statement. Connection initialization
properties like auto-commit mode, transaction isolation and read-only mode
will be kept and applied to the actual JDBC Connection as soon as an actual
Connection is fetched (if ever). Consequently, commit and rollback calls will
be ignored if no Statements have been created. As of 6.1.2, there is also
special support for a <a href="#setReadOnlyDataSource(javax.sql.DataSource)"><code>read-only DataSource</code></a> to use
during a read-only transaction, in addition to the regular target DataSource.

<p>This DataSource proxy allows to avoid fetching JDBC Connections from
a pool unless actually necessary. JDBC transaction control can happen
without fetching a Connection from the pool or communicating with the
database; this will be done lazily on first creation of a JDBC Statement.
As a bonus, this allows for taking the transaction-synchronized read-only
flag and/or isolation level into account in a routing DataSource (for example,
<a href="lookup/IsolationLevelDataSourceRouter.html" title="class in org.springframework.jdbc.datasource.lookup"><code>IsolationLevelDataSourceRouter</code></a>).

<p><b>If you configure both a LazyConnectionDataSourceProxy and a
TransactionAwareDataSourceProxy, make sure that the latter is the outermost
DataSource.</b> In such a scenario, data access code will talk to the
transaction-aware DataSource, which will in turn work with the
LazyConnectionDataSourceProxy. As of 6.1.2, LazyConnectionDataSourceProxy will
initialize its default connection characteristics on first Connection access;
to enforce this on startup, call <a href="#checkDefaultConnectionProperties()"><code>checkDefaultConnectionProperties()</code></a>.

<p>Lazy fetching of physical JDBC Connections is particularly beneficial
in a generic transaction demarcation environment. It allows you to demarcate
transactions on all methods that could potentially perform data access,
without paying a performance penalty if no actual data access happens.

<p>This DataSource proxy gives you behavior analogous to JTA and a
transactional JNDI DataSource (as provided by the Jakarta EE server), even
with a local transaction strategy like DataSourceTransactionManager or
HibernateTransactionManager. It does not add value with Spring's
JtaTransactionManager as transaction strategy.

<p>Lazy fetching of JDBC Connections is also recommended for read-only
operations with Hibernate, in particular if the chances of resolving the
result in the second-level cache are high. This avoids the need to
communicate with the database at all for such read-only operations.
You will get the same effect with non-transactional reads, but lazy fetching
of JDBC Connections allows you to still perform reads in transactions.

<p>As of 6.2.6, this DataSource proxy also suppresses a rollback attempt
in case of a timeout where the connection has been closed in the meantime.

<p><b>NOTE:</b> This DataSource proxy needs to return wrapped Connections
(which implement the <a href="ConnectionProxy.html" title="interface in org.springframework.jdbc.datasource"><code>ConnectionProxy</code></a> interface) in order to handle
lazy fetching of an actual JDBC Connection. Use <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Wrapper.html#unwrap(java.lang.Class)" title="class or interface in java.sql" class="external-link"><code>Wrapper.unwrap(Class)</code></a>
to retrieve the native JDBC Connection.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>1.1.4</dd>
<dt>Author:</dt>
<dd>Juergen Hoeller, Sam Brannen</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="DataSourceTransactionManager.html" title="class in org.springframework.jdbc.datasource"><code>DataSourceTransactionManager</code></a></li>
<li><a href="DelegatingDataSource.html#setTargetDataSource(javax.sql.DataSource)"><code>DelegatingDataSource.setTargetDataSource(DataSource)</code></a></li>
<li><a href="#setReadOnlyDataSource(javax.sql.DataSource)"><code>setReadOnlyDataSource(DataSource)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">LazyConnectionDataSourceProxy</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Create a new LazyConnectionDataSourceProxy.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(javax.sql.DataSource)" class="member-name-link">LazyConnectionDataSourceProxy</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;targetDataSource)</code></div>
<div class="col-last odd-row-color">
<div class="block">Create a new LazyConnectionDataSourceProxy.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkDefaultConnectionProperties()" class="member-name-link">checkDefaultConnectionProperties</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine default auto-commit and transaction isolation
via a Connection from the target DataSource, if possible.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkDefaultConnectionProperties(java.sql.Connection)" class="member-name-link">checkDefaultConnectionProperties</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;con)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check the default connection properties (auto-commit, transaction isolation),
keeping them to be able to expose them correctly without fetching an actual
JDBC Connection from the target DataSource later on.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#defaultAutoCommit()" class="member-name-link">defaultAutoCommit</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expose the default auto-commit value.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#defaultTransactionIsolation()" class="member-name-link">defaultTransactionIsolation</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Expose the default transaction isolation value.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConnection()" class="member-name-link">getConnection</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return a Connection handle that lazily fetches an actual JDBC Connection
when asked for a Statement (or PreparedStatement or CallableStatement).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConnection(java.lang.String,java.lang.String)" class="member-name-link">getConnection</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return a Connection handle that lazily fetches an actual JDBC Connection
when asked for a Statement (or PreparedStatement or CallableStatement).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDefaultAutoCommit(boolean)" class="member-name-link">setDefaultAutoCommit</a><wbr>(boolean&nbsp;defaultAutoCommit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the default auto-commit mode to expose when no target Connection
has been fetched yet (when the actual JDBC Connection default is not known yet).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDefaultTransactionIsolation(int)" class="member-name-link">setDefaultTransactionIsolation</a><wbr>(int&nbsp;defaultTransactionIsolation)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the default transaction isolation level to expose when no target Connection
has been fetched yet (when the actual JDBC Connection default is not known yet).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDefaultTransactionIsolationName(java.lang.String)" class="member-name-link">setDefaultTransactionIsolationName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;constantName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the default transaction isolation level by the name of the corresponding
constant in <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> &mdash; for example,
<code>"TRANSACTION_SERIALIZABLE"</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setReadOnlyDataSource(javax.sql.DataSource)" class="member-name-link">setReadOnlyDataSource</a><wbr>(<a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;readOnlyDataSource)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Specify a variant of the target DataSource to use for read-only transactions.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.jdbc.datasource.DelegatingDataSource">Methods inherited from class&nbsp;<a href="DelegatingDataSource.html#method-summary" title="class in org.springframework.jdbc.datasource">DelegatingDataSource</a></h3>
<code><a href="DelegatingDataSource.html#afterPropertiesSet()" title="afterPropertiesSet()">afterPropertiesSet</a>, <a href="DelegatingDataSource.html#createConnectionBuilder()" title="createConnectionBuilder()">createConnectionBuilder</a>, <a href="DelegatingDataSource.html#createShardingKeyBuilder()" title="createShardingKeyBuilder()">createShardingKeyBuilder</a>, <a href="DelegatingDataSource.html#getLoginTimeout()" title="getLoginTimeout()">getLoginTimeout</a>, <a href="DelegatingDataSource.html#getLogWriter()" title="getLogWriter()">getLogWriter</a>, <a href="DelegatingDataSource.html#getParentLogger()" title="getParentLogger()">getParentLogger</a>, <a href="DelegatingDataSource.html#getTargetDataSource()" title="getTargetDataSource()">getTargetDataSource</a>, <a href="DelegatingDataSource.html#isWrapperFor(java.lang.Class)" title="isWrapperFor(Class)">isWrapperFor</a>, <a href="DelegatingDataSource.html#obtainTargetDataSource()" title="obtainTargetDataSource()">obtainTargetDataSource</a>, <a href="DelegatingDataSource.html#setLoginTimeout(int)" title="setLoginTimeout(int)">setLoginTimeout</a>, <a href="DelegatingDataSource.html#setLogWriter(java.io.PrintWriter)" title="setLogWriter(PrintWriter)">setLogWriter</a>, <a href="DelegatingDataSource.html#setTargetDataSource(javax.sql.DataSource)" title="setTargetDataSource(DataSource)">setTargetDataSource</a>, <a href="DelegatingDataSource.html#unwrap(java.lang.Class)" title="unwrap(Class)">unwrap</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#method-summary" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>LazyConnectionDataSourceProxy</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LazyConnectionDataSourceProxy</span>()</div>
<div class="block">Create a new LazyConnectionDataSourceProxy.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="DelegatingDataSource.html#setTargetDataSource(javax.sql.DataSource)"><code>DelegatingDataSource.setTargetDataSource(DataSource)</code></a></li>
<li><a href="#setReadOnlyDataSource(javax.sql.DataSource)"><code>setReadOnlyDataSource(DataSource)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(javax.sql.DataSource)">
<h3>LazyConnectionDataSourceProxy</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LazyConnectionDataSourceProxy</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;targetDataSource)</span></div>
<div class="block">Create a new LazyConnectionDataSourceProxy.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>targetDataSource</code> - the target DataSource</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="DelegatingDataSource.html#setTargetDataSource(javax.sql.DataSource)"><code>DelegatingDataSource.setTargetDataSource(DataSource)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setReadOnlyDataSource(javax.sql.DataSource)">
<h3>setReadOnlyDataSource</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setReadOnlyDataSource</span><wbr><span class="parameters">(<a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a>&nbsp;readOnlyDataSource)</span></div>
<div class="block">Specify a variant of the target DataSource to use for read-only transactions.
<p>If available, a Connection from such a read-only DataSource will be lazily
obtained within a Spring-managed transaction that has been marked as read-only.
The <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setReadOnly(boolean)" title="class or interface in java.sql" class="external-link"><code>Connection.setReadOnly(boolean)</code></a> flag will be left untouched, expecting it
to be pre-configured as a default on the read-only DataSource, avoiding the
overhead of switching it at the beginning and end of every transaction.
Also, the default auto-commit and isolation level settings are expected to
match the default connection properties of the primary target DataSource.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>6.1.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="DelegatingDataSource.html#setTargetDataSource(javax.sql.DataSource)"><code>DelegatingDataSource.setTargetDataSource(DataSource)</code></a></li>
<li><a href="#setDefaultAutoCommit(boolean)"><code>setDefaultAutoCommit(boolean)</code></a></li>
<li><a href="#setDefaultTransactionIsolation(int)"><code>setDefaultTransactionIsolation(int)</code></a></li>
<li><a href="../../transaction/TransactionDefinition.html#isReadOnly()"><code>TransactionDefinition.isReadOnly()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setDefaultAutoCommit(boolean)">
<h3>setDefaultAutoCommit</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setDefaultAutoCommit</span><wbr><span class="parameters">(boolean&nbsp;defaultAutoCommit)</span></div>
<div class="block">Set the default auto-commit mode to expose when no target Connection
has been fetched yet (when the actual JDBC Connection default is not known yet).
<p>If not specified, the default gets determined by checking lazily on first
access of a Connection.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setAutoCommit(boolean)" title="class or interface in java.sql" class="external-link"><code>Connection.setAutoCommit(boolean)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setDefaultTransactionIsolationName(java.lang.String)">
<h3>setDefaultTransactionIsolationName</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setDefaultTransactionIsolationName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;constantName)</span></div>
<div class="block">Set the default transaction isolation level by the name of the corresponding
constant in <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> &mdash; for example,
<code>"TRANSACTION_SERIALIZABLE"</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>constantName</code> - name of the constant</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#setDefaultTransactionIsolation(int)"><code>setDefaultTransactionIsolation(int)</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#TRANSACTION_READ_UNCOMMITTED" title="class or interface in java.sql" class="external-link"><code>Connection.TRANSACTION_READ_UNCOMMITTED</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#TRANSACTION_READ_COMMITTED" title="class or interface in java.sql" class="external-link"><code>Connection.TRANSACTION_READ_COMMITTED</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#TRANSACTION_REPEATABLE_READ" title="class or interface in java.sql" class="external-link"><code>Connection.TRANSACTION_REPEATABLE_READ</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#TRANSACTION_SERIALIZABLE" title="class or interface in java.sql" class="external-link"><code>Connection.TRANSACTION_SERIALIZABLE</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="setDefaultTransactionIsolation(int)">
<h3>setDefaultTransactionIsolation</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setDefaultTransactionIsolation</span><wbr><span class="parameters">(int&nbsp;defaultTransactionIsolation)</span></div>
<div class="block">Set the default transaction isolation level to expose when no target Connection
has been fetched yet (when the actual JDBC Connection default is not known yet).
<p>This property accepts the int constant value (for example, 8) as defined in the
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link"><code>Connection</code></a> interface; it is mainly intended for programmatic
use. Consider using the "defaultTransactionIsolationName" property for setting
the value by name (for example, <code>"TRANSACTION_SERIALIZABLE"</code>).
<p>If not specified, the default gets determined by checking lazily on first
access of a Connection.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#setDefaultTransactionIsolationName(java.lang.String)"><code>setDefaultTransactionIsolationName(String)</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setTransactionIsolation(int)" title="class or interface in java.sql" class="external-link"><code>Connection.setTransactionIsolation(int)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="checkDefaultConnectionProperties()">
<h3>checkDefaultConnectionProperties</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">checkDefaultConnectionProperties</span>()</div>
<div class="block">Determine default auto-commit and transaction isolation
via a Connection from the target DataSource, if possible.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>6.1.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="#checkDefaultConnectionProperties(java.sql.Connection)"><code>checkDefaultConnectionProperties(Connection)</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="checkDefaultConnectionProperties(java.sql.Connection)">
<h3>checkDefaultConnectionProperties</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">checkDefaultConnectionProperties</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a>&nbsp;con)</span>
                                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Check the default connection properties (auto-commit, transaction isolation),
keeping them to be able to expose them correctly without fetching an actual
JDBC Connection from the target DataSource later on.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>con</code> - the Connection to use for checking</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - if thrown by Connection methods</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="defaultAutoCommit()">
<h3>defaultAutoCommit</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></span>&nbsp;<span class="element-name">defaultAutoCommit</span>()</div>
<div class="block">Expose the default auto-commit value.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="defaultTransactionIsolation()">
<h3>defaultTransactionIsolation</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://jspecify.dev/docs/api/org/jspecify/annotations/Nullable.html" title="class or interface in org.jspecify.annotations" class="external-link">@Nullable</a> <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a></span>&nbsp;<span class="element-name">defaultTransactionIsolation</span>()</div>
<div class="block">Expose the default transaction isolation value.</div>
</div>
</section>
</li>
<li>
<section class="detail" id="getConnection()">
<h3>getConnection</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></span>&nbsp;<span class="element-name">getConnection</span>()
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Return a Connection handle that lazily fetches an actual JDBC Connection
when asked for a Statement (or PreparedStatement or CallableStatement).
<p>The returned Connection handle implements the ConnectionProxy interface,
allowing to retrieve the underlying target Connection.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html#getConnection()" title="class or interface in javax.sql" class="external-link">getConnection</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="DelegatingDataSource.html#getConnection()">getConnection</a></code>&nbsp;in class&nbsp;<code><a href="DelegatingDataSource.html" title="class in org.springframework.jdbc.datasource">DelegatingDataSource</a></code></dd>
<dt>Returns:</dt>
<dd>a lazy Connection handle</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="ConnectionProxy.html#getTargetConnection()"><code>ConnectionProxy.getTargetConnection()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getConnection(java.lang.String,java.lang.String)">
<h3>getConnection</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html" title="class or interface in java.sql" class="external-link">Connection</a></span>&nbsp;<span class="element-name">getConnection</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span>
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Return a Connection handle that lazily fetches an actual JDBC Connection
when asked for a Statement (or PreparedStatement or CallableStatement).
<p>The returned Connection handle implements the ConnectionProxy interface,
allowing to retrieve the underlying target Connection.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html#getConnection(java.lang.String,java.lang.String)" title="class or interface in javax.sql" class="external-link">getConnection</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/javax/sql/DataSource.html" title="class or interface in javax.sql" class="external-link">DataSource</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="DelegatingDataSource.html#getConnection(java.lang.String,java.lang.String)">getConnection</a></code>&nbsp;in class&nbsp;<code><a href="DelegatingDataSource.html" title="class in org.springframework.jdbc.datasource">DelegatingDataSource</a></code></dd>
<dt>Parameters:</dt>
<dd><code>username</code> - the per-Connection username</dd>
<dd><code>password</code> - the per-Connection password</dd>
<dt>Returns:</dt>
<dd>a lazy Connection handle</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code></dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="ConnectionProxy.html#getTargetConnection()"><code>ConnectionProxy.getTargetConnection()</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</body>
</html>

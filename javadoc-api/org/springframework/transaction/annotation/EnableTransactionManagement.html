<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (25) -->
<title>EnableTransactionManagement (Spring Framework 7.0.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.springframework.transaction.annotation, annotation type: EnableTransactionManagement">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/jquery-ui.min.css">
<link rel="stylesheet" type="text/css" href="../../../../resource-files/stylesheet.css">
<script type="text/javascript" src="../../../../script-files/script.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">const pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="nav-content">
<div class="nav-menu-button"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button></div>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/EnableTransactionManagement.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../search.html">Search</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<div class="about-language">Spring Framework</div>
</div>
</div>
<div class="sub-nav">
<div class="nav-content">
<ol class="sub-nav-list">
<li><a href="package-summary.html">org.springframework.transaction.annotation</a></li>
<li><a href="EnableTransactionManagement.html" class="current-selection">EnableTransactionManagement</a></li>
</ol>
<div class="nav-list-search"><input type="text" id="search-input" disabled placeholder="Search documentation (type /)" aria-label="Search in documentation" autocomplete="off" spellcheck="false"><input type="reset" id="reset-search" disabled value="Reset"></div>
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="main-grid">
<nav role="navigation" class="toc" aria-label="Table of contents">
<div class="toc-header">Contents&nbsp;<input type="text" class="filter-input" disabled placeholder="Filter contents (type .)" aria-label="Filter table of contents" autocomplete="off" spellcheck="false"><input type="reset" class="reset-filter" disabled tabindex="-1" value="Reset"></div>
<ol class="toc-list" tabindex="-1">
<li><a href="#" tabindex="0">Description</a></li>
<li><a href="#annotation-interface-optional-element-summary" tabindex="0">Optional Element Summary</a></li>
<li><a href="#annotation-interface-element-detail" tabindex="0">Element Details</a>
<ol class="toc-list">
<li><a href="#proxyTargetClass()" tabindex="0">proxyTargetClass</a></li>
<li><a href="#mode()" tabindex="0">mode</a></li>
<li><a href="#order()" tabindex="0">order</a></li>
<li><a href="#rollbackOn()" tabindex="0">rollbackOn</a></li>
</ol>
</li>
</ol>
<button class="hide-sidebar"><span>Hide sidebar&nbsp;</span><img src="../../../../resource-files/left.svg" alt="Hide sidebar"></button><button class="show-sidebar"><img src="../../../../resource-files/right.svg" alt="Show sidebar"><span>&nbsp;Show sidebar</span></button></nav>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h1 title="Annotation Interface EnableTransactionManagement" class="title">Annotation Interface EnableTransactionManagement</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="horizontal-scroll">
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="class or interface in java.lang.annotation" class="external-link">TYPE</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Documented.html" title="class or interface in java.lang.annotation" class="external-link">@Documented</a>
<a href="../../context/annotation/Import.html" title="annotation interface in org.springframework.context.annotation">@Import</a>(<a href="TransactionManagementConfigurationSelector.html" title="class in org.springframework.transaction.annotation">TransactionManagementConfigurationSelector</a>.class)
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">EnableTransactionManagement</span></div>
<div class="block">Enables Spring's annotation-driven transaction management capability, similar to
the support found in Spring's <code>&lt;tx:*&gt;</code> XML namespace. To be used on
<a href="../../context/annotation/Configuration.html" title="annotation interface in org.springframework.context.annotation"><code>@Configuration</code></a>
classes to configure traditional, imperative transaction management or
reactive transaction management.

<p>The following example demonstrates imperative transaction management
using a <a href="../PlatformTransactionManager.html" title="interface in org.springframework.transaction"><code>PlatformTransactionManager</code></a>. For reactive transaction management, configure a
<a href="../ReactiveTransactionManager.html" title="interface in org.springframework.transaction"><code>ReactiveTransactionManager</code></a> instead.

<pre class="code">
&#064;Configuration
&#064;EnableTransactionManagement
public class AppConfig {

    &#064;Bean
    public FooRepository fooRepository() {
        // configure and return a class having &#064;Transactional methods
        return new JdbcFooRepository(dataSource());
    }

    &#064;Bean
    public DataSource dataSource() {
        // configure and return the necessary JDBC DataSource
    }

    &#064;Bean
    public PlatformTransactionManager txManager() {
        return new DataSourceTransactionManager(dataSource());
    }
}</pre>

<p>For reference, the example above can be compared to the following Spring XML
configuration:

<pre class="code">
&lt;beans&gt;

    &lt;tx:annotation-driven/&gt;

    &lt;bean id="fooRepository" class="com.foo.JdbcFooRepository"&gt;
        &lt;constructor-arg ref="dataSource"/&gt;
    &lt;/bean&gt;

    &lt;bean id="dataSource" class="com.vendor.VendorDataSource"/&gt;

    &lt;bean id="transactionManager" class="org.sfwk...DataSourceTransactionManager"&gt;
        &lt;constructor-arg ref="dataSource"/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</pre>

In both of the scenarios above, <code>@EnableTransactionManagement</code> and <code>
&lt;tx:annotation-driven/&gt;</code> are responsible for registering the necessary Spring
components that power annotation-driven transaction management, such as the
TransactionInterceptor and the proxy- or AspectJ-based advice that weaves the
interceptor into the call stack when <code>JdbcFooRepository</code>'s <code>@Transactional</code>
methods are invoked.

<p>A minor difference between the two examples lies in the naming of the <code>
TransactionManager</code> bean: In the <code>@Bean</code> case, the name is
<em>"txManager"</em> (per the name of the method); in the XML case, the name is
<em>"transactionManager"</em>. <code>&lt;tx:annotation-driven/&gt;</code> is hard-wired to
look for a bean named "transactionManager" by default, however
<code>@EnableTransactionManagement</code> is more flexible; it will fall back to a by-type
lookup for any <code>TransactionManager</code> bean in the container. Thus the name
can be "txManager", "transactionManager", or "tm": it simply does not matter.

<p>For those that wish to establish a more direct relationship between
<code>@EnableTransactionManagement</code> and the exact transaction manager bean to be used,
the <a href="TransactionManagementConfigurer.html" title="interface in org.springframework.transaction.annotation"><code>TransactionManagementConfigurer</code></a> callback interface may be implemented -
notice the <code>implements</code> clause and the <code>@Override</code>-annotated method below:

<pre class="code">
&#064;Configuration
&#064;EnableTransactionManagement
public class AppConfig implements TransactionManagementConfigurer {

    &#064;Bean
    public FooRepository fooRepository() {
        // configure and return a class having &#064;Transactional methods
        return new JdbcFooRepository(dataSource());
    }

    &#064;Bean
    public DataSource dataSource() {
        // configure and return the necessary JDBC DataSource
    }

    &#064;Bean
    public PlatformTransactionManager txManager() {
        return new DataSourceTransactionManager(dataSource());
    }

    &#064;Override
    public PlatformTransactionManager annotationDrivenTransactionManager() {
        return txManager();
    }
}</pre>

<p>This approach may be desirable simply because it is more explicit, or it may be
necessary in order to distinguish between two <code>TransactionManager</code> beans
present in the same container.  As the name suggests, the
<code>annotationDrivenTransactionManager()</code> will be the one used for processing
<code>@Transactional</code> methods. See <a href="TransactionManagementConfigurer.html" title="interface in org.springframework.transaction.annotation"><code>TransactionManagementConfigurer</code></a> Javadoc
for further details.

<p>The <a href="#mode()"><code>mode()</code></a> attribute controls how advice is applied: If the mode is
<a href="../../context/annotation/AdviceMode.html#PROXY"><code>AdviceMode.PROXY</code></a> (the default), then the other attributes control the behavior
of the proxying. Please note that proxy mode allows for interception of calls through
the proxy only; local calls within the same class cannot get intercepted that way.

<p>Note that if the <a href="#mode()">mode()</a> is set to <a href="../../context/annotation/AdviceMode.html#ASPECTJ"><code>AdviceMode.ASPECTJ</code></a>, then the
value of the <a href="#proxyTargetClass()"><code>proxyTargetClass()</code></a> attribute will be ignored. Note also that in
this case the <code>spring-aspects</code> module JAR must be present on the classpath, with
compile-time weaving or load-time weaving applying the aspect to the affected classes.
There is no proxy involved in such a scenario; local calls will be intercepted as well.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>3.1</dd>
<dt>Author:</dt>
<dd>Chris Beams, Juergen Hoeller</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="TransactionManagementConfigurer.html" title="interface in org.springframework.transaction.annotation"><code>TransactionManagementConfigurer</code></a></li>
<li><a href="TransactionManagementConfigurationSelector.html" title="class in org.springframework.transaction.annotation"><code>TransactionManagementConfigurationSelector</code></a></li>
<li><a href="ProxyTransactionManagementConfiguration.html" title="class in org.springframework.transaction.annotation"><code>ProxyTransactionManagementConfiguration</code></a></li>
<li><a href="../aspectj/AspectJTransactionManagementConfiguration.html" title="class in org.springframework.transaction.aspectj"><code>AspectJTransactionManagementConfiguration</code></a></li>
</ul>
</dd>
</dl>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="../../context/annotation/AdviceMode.html" title="enum class in org.springframework.context.annotation">AdviceMode</a></code></div>
<div class="col-second even-row-color"><code><a href="#mode()" class="member-name-link">mode</a></code></div>
<div class="col-last even-row-color">
<div class="block">Indicate how transactional advice should be applied.</div>
</div>
<div class="col-first odd-row-color"><code>int</code></div>
<div class="col-second odd-row-color"><code><a href="#order()" class="member-name-link">order</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Indicate the ordering of the execution of the transaction advisor
when multiple advices are applied at a specific joinpoint.</div>
</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#proxyTargetClass()" class="member-name-link">proxyTargetClass</a></code></div>
<div class="col-last even-row-color">
<div class="block">Indicate whether subclass-based (CGLIB) proxies are to be created (<code>true</code>)
as opposed to standard Java interface-based proxies (<code>false</code>).</div>
</div>
<div class="col-first odd-row-color"><code><a href="RollbackOn.html" title="enum class in org.springframework.transaction.annotation">RollbackOn</a></code></div>
<div class="col-second odd-row-color"><code><a href="#rollbackOn()" class="member-name-link">rollbackOn</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Indicate the rollback behavior for rule-based transactions without
custom rollback rules: default is rollback on unchecked exception,
this can be switched to rollback on any exception (including checked).</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="proxyTargetClass()">
<h3>proxyTargetClass</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">proxyTargetClass</span></div>
<div class="block">Indicate whether subclass-based (CGLIB) proxies are to be created (<code>true</code>)
as opposed to standard Java interface-based proxies (<code>false</code>).
The default is <code>false</code>. <strong>Applicable only if <a href="#mode()"><code>mode()</code></a>
is set to <a href="../../context/annotation/AdviceMode.html#PROXY"><code>AdviceMode.PROXY</code></a></strong>.
<p>Note that setting this attribute to <code>true</code> will affect <em>all</em>
Spring-managed beans requiring proxying, not just those marked with
<code>@Transactional</code>. For example, other beans marked with Spring's
<code>@Async</code> annotation will be upgraded to subclass proxying at the same
time. This approach has no negative impact in practice unless one is explicitly
expecting one type of proxy vs another, for example, in tests.</div>
<dl class="notes">
<dt>Default:</dt>
<dd><code>false</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="mode()">
<h3>mode</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="../../context/annotation/AdviceMode.html" title="enum class in org.springframework.context.annotation">AdviceMode</a></span>&nbsp;<span class="element-name">mode</span></div>
<div class="block">Indicate how transactional advice should be applied.
<p><b>The default is <a href="../../context/annotation/AdviceMode.html#PROXY"><code>AdviceMode.PROXY</code></a>.</b>
Please note that proxy mode allows for interception of calls through the proxy
only. Local calls within the same class cannot get intercepted that way; an
<a href="Transactional.html" title="annotation interface in org.springframework.transaction.annotation"><code>Transactional</code></a> annotation on such a method within a local call will be
ignored since Spring's interceptor does not even kick in for such a runtime
scenario. For a more advanced mode of interception, consider switching this to
<a href="../../context/annotation/AdviceMode.html#ASPECTJ"><code>AdviceMode.ASPECTJ</code></a>.</div>
<dl class="notes">
<dt>Default:</dt>
<dd><code>PROXY</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="order()">
<h3>order</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">order</span></div>
<div class="block">Indicate the ordering of the execution of the transaction advisor
when multiple advices are applied at a specific joinpoint.
<p>The default is <a href="../../core/Ordered.html#LOWEST_PRECEDENCE"><code>Ordered.LOWEST_PRECEDENCE</code></a>.</div>
<dl class="notes">
<dt>Default:</dt>
<dd><code>2147483647</code></dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="rollbackOn()">
<h3>rollbackOn</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="return-type"><a href="RollbackOn.html" title="enum class in org.springframework.transaction.annotation">RollbackOn</a></span>&nbsp;<span class="element-name">rollbackOn</span></div>
<div class="block">Indicate the rollback behavior for rule-based transactions without
custom rollback rules: default is rollback on unchecked exception,
this can be switched to rollback on any exception (including checked).
<p>Note that transaction-specific rollback rules override the default
behavior but retain the chosen default for unspecified exceptions.
This is the case for Spring's <a href="Transactional.html" title="annotation interface in org.springframework.transaction.annotation"><code>Transactional</code></a> as well as JTA's
<code>Transactional</code> when used with Spring here.
<p>Unless you rely on EJB-style business exceptions with commit behavior,
it is advisable to switch to <a href="RollbackOn.html#ALL_EXCEPTIONS"><code>RollbackOn.ALL_EXCEPTIONS</code></a> for a
consistent rollback even in case of a (potentially accidental) checked
exception. Also, it is advisable to make that switch for Kotlin-based
applications where there is no enforcement of checked exceptions at all.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>6.2</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="Transactional.html#rollbackFor()"><code>Transactional.rollbackFor()</code></a></li>
<li><a href="Transactional.html#noRollbackFor()"><code>Transactional.noRollbackFor()</code></a></li>
<li><code>Transactional.rollbackOn()</code></li>
<li><code>Transactional.dontRollbackOn()</code></li>
</ul>
</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd><code>RUNTIME_EXCEPTIONS</code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</body>
</html>
